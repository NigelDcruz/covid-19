let allCaseNo=document.getElementById("allCaseNo"),recoveredCaseNo=document.getElementById("recoveredCaseNo"),deathCaseNo=document.getElementById("deathCaseNo"),dataFor=document.getElementById("dataFor"),selectCountry=document.getElementById("selectCountry"),submitCountry=document.getElementById("submitCountry"),tableRow=document.getElementById("table-row"),LoadingDiv=document.getElementById("LoadingDiv"),chartContainer=document.getElementById("chart-container");function numberWithCommas(t){var e=(r=(t+=".00").split(".",2))[1],a=parseInt(r[0]);if(isNaN(a))return"";var n="";a<0&&(n="-"),a=Math.abs(a);for(var o=new String(a),r=[];o.length>3;){var l=o.substr(o.length-3);r.unshift(l),o=o.substr(0,o.length-3)}return o.length>0&&r.unshift(o),o=r.join(","),(r=(t=n+(t=e.length<1?o:o+"."+e)).split(".",2))[0]}function sum(t){if("[object Array]"!==toString.call(t))return!1;for(var e=0,a=0;a<t.length;a++)isNaN(t[a])||(e+=Number(t[a]));return e}function compare(t,e){const a=t.country.toUpperCase(),n=e.country.toUpperCase();let o=0;return a>n?o=1:a<n&&(o=-1),o}let handleReplaceAllCasesValues=(t,e,a)=>{t=numberWithCommas(t),e=numberWithCommas(e),a=numberWithCommas(a),allCaseNo.innerText=t,recoveredCaseNo.innerText=e,deathCaseNo.innerText=a},handleReplaceDataFor=t=>{dataFor.innerText=t};function initChart(t,e,a,n){clearChart();let o=document.getElementById("covidCasesChart").getContext("2d");new Chart(o,{type:"bar",data:{labels:["All Cases","Recovered Cases","Death Cases","Added Today"],datasets:[{barPercentage:.5,label:"",borderColor:"rgba(0,0,0)",backgroundColor:["#86c6be","#a6c64c","#c80003","blue"],data:[t,e,a,n]}]},options:{responsive:!0,maintainAspectRatio:!1,Bar:.8,legend:{labels:{fontSize:25,padding:20,boxWidth:0}},tooltips:{bodyFontSize:25,callbacks:{label:function(t){return numberWithCommas(t.yLabel)},title:function(){}},displayColors:!1},scales:{yAxes:[{gridLines:{display:!1},ticks:{fontStyle:"bold"}}]}}})}function generateAnyChart(t,e,a,n,o){clearChart();let r=document.getElementById("covidCasesChart").getContext("2d");new Chart(r,{type:`${o}`,data:{labels:["All Cases","Recovered Cases","Death Cases","Added Today"],datasets:[{barPercentage:.5,label:"",borderColor:"rgba(0,0,0)",backgroundColor:["#86c6be","#a6c64c","#c80003","blue"],data:[t,e,a,n]}]},options:{responsive:!0,maintainAspectRatio:!1,Bar:.8,legend:{labels:{fontSize:25,padding:20,boxWidth:0}},tooltips:{bodyFontSize:25,callbacks:{label:function(t){return numberWithCommas(t.yLabel)},title:function(){}},displayColors:!1},scales:{yAxes:[{gridLines:{display:!1},ticks:{fontStyle:"bold"}}]}}})}$("#accordion_search_bar").on("change keyup paste click",function(){var t=$(this).val().toLowerCase();$("#accordion .card").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(t)>-1)})}),document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){t.preventDefault(),document.querySelector(this.getAttribute("href")).scrollIntoView({behavior:"smooth"})})}),$(".navbar-nav .nav-link").on("click",function(){$(".navbar-nav").find(".active").removeClass("active"),$(this).addClass("active")});let renderCovidChart=(t,e,a,n)=>{initChart(t,e,a,n)},clearChart=()=>{chartContainer.innerHTML="",chartContainer.innerHTML='<canvas id="covidCasesChart"></canvas>'};function populateCountries(t){if(210==$("option").length)return;let e=document.createElement("option"),a=document.createAttribute("class");a.value="selectCountryOpptions",e.setAttributeNode(a);let n=document.createAttribute("value");n.value=`${t}`,e.setAttributeNode(n);let o=document.createTextNode(`${t}`);e.appendChild(o),selectCountry.appendChild(e)}function populateTable(t,e,a,n,o){tableRow.innerHTML="",setTimeout(()=>{let r=`<tr>\n\t\t\t\t\t\t\t\t<td>${t}</td>\n\t\t\t\t\t\t\t\t<td>${numberWithCommas(e)}</td>\n\t\t\t\t\t\t\t\t<td>${numberWithCommas(a)}</td>\n\t\t\t\t\t\t\t\t<td>${numberWithCommas(n)}</td>\n\t\t\t\t\t\t\t\t<td>${numberWithCommas(o)}</td>\n\t\t\t\t\t\t\t</tr>`;tableRow.innerHTML+=r},0)}async function loadInitialData(){let t,e=await fetch("https://corona.lmao.ninja/all"),a=await e.json(),n=await fetch("https://corona.lmao.ninja/countries"),o=await n.json(),r=a.cases,l=a.deaths,s=a.recovered,i=[];o.sort(compare),o.forEach(e=>{populateTable(e.country,e.cases,e.recovered,e.deaths,e.todayCases),i.push(e.todayCases),t=sum(i)}),handleReplaceAllCasesValues(r,s,l),handleReplaceDataFor("All Countries"),renderCovidChart(r,s,l,t);var c=new Date(a.updated);document.getElementById("lastUpdated").innerHTML=c.toString(),o.forEach(t=>{populateCountries(t.country)})}async function renderNewData(t){let e=await fetch(`https://corona.lmao.ninja/countries/${t}`),a=await e.json(),n=a.country,o=a.cases,r=a.deaths,l=a.recovered,s=a.todayCases;renderCovidChart(o,l,r,s),populateTable(n,o,l,r,s)}loadInitialData(),submitCountry.addEventListener("click",()=>{"All"!=selectCountry.value?renderNewData(selectCountry.value):loadInitialData()}),$("#selectCountry").on("change",function(){if("All"==selectCountry.value){let t="All Countries";return loadInitialData(),void handleReplaceDataFor(t)}handleReplaceDataFor(selectCountry.value),renderNewData(selectCountry.value)});